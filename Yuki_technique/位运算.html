<!DOCTYPE html>
<html>
 
<head>
  <meta charset="utf-8">
	<script type="text/javascript" src="/ACM/js/link.js"></script>
	<title>线段树套线段树</title>
</head>
 
<body>
	
										
<div class="ACMright">
	<center>
	<h1>线段树套线段树</h1>
	
	<div>
	</center>
	<pre><span class="k">const</span> <span class="kt">int</span> <span class="n">maxn</span><span class="o">=</span><span class="mf">2e6</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">zero</span><span class="p">[</span><span class="n">maxn</span><span class="p">];</span><span class="c1">//最高位的有效数字0取出来变成1</span>
<span class="kt">int</span> <span class="n">high</span><span class="p">[</span><span class="n">maxn</span><span class="p">];</span><span class="c1">//取出最高位的1</span>
<span class="c1">// 最低位的1 -&gt;                  x&amp;-x</span>
<span class="c1">// 去掉最低位的1 -&gt;               x&amp;(x-1)</span>
<span class="c1">// 有效数字全是1 -&gt;               (x&amp;(x+1))==0</span>
<span class="c1">//把最低位的0 变成1-&gt;              x|(x+1)</span>
<span class="c1">//取出最低位的0并变成1             (~x)&amp;(x+1)</span>
<span class="c1">//取出第k位（约定最低位为第0位）     x&amp;(1&lt;&lt;k)</span>

<span class="kt">void</span> <span class="n">ini</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">up</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">20</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">up</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">high</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">high</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span><span class="p">((</span><span class="n">i</span><span class="o">&amp;</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
            <span class="n">high</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">up</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">ii</span><span class="o">=</span><span class="n">i</span><span class="o">^</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">zero</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">high</span><span class="p">[</span><span class="n">ii</span><span class="o">-</span><span class="n">high</span><span class="p">[</span><span class="n">ii</span><span class="p">]];</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre>
	</div>

</div>
</html>
